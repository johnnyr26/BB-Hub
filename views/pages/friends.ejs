<!DOCTYPE html>
<html>
    <head>
        <link href="/css/header.css" type="text/css" rel="stylesheet"/>
        <link  href='/css/style.css' type="text/css" rel='stylesheet'/>
        <link  href='/css/index.css' type="text/css" rel='stylesheet'/>
        <link  href='/css/friends.css' type="text/css" rel='stylesheet'/>
    </head>
    <body>
        <%- include('../partials/header'); -%>
        <main>
            <% if (locals.friendRequests && friendRequests.length) { %>
                <div class="friends-divs">
                    <h1 class="title-heading">Friend Requests</h1>
                    <div class="friends-row">
                        <% friendRequests.forEach(friend => { %>
                            <section class="friends-section">
                                <div class="friends-header">
                                    <% if (friend.picture) { %>
                                        <img class="friends-image" alt="Image" src=<%= friend.picture %>>
                                    <% } %>
                                </div>
                                <div class="friends-body">
                                    <h1 class="friends-name"><%= friend.name %></h1>
                                    <button class="accept-friend-button" name="<%= friend.name %>">Accept</button>
                                    <button class="decline-friend-button" name="<%= friend.name %>">Decline</button>
                                </div>
                            </section>
                        <% }); %>
                    </div>
                </div>
            <% } %>
            <% if (locals.friends && friends.length) { %>
                <div class="friends-divs">
                    <h1 class="title-heading">Friends</h1>
                    <div class="friends-row">
                        <% friends.forEach(friend => { %>
                            <a href="/users/<%= friend.id %>" class="friends-section">
                                <div class="friends-header">
                                    <% if (friend.picture) { %>
                                        <img class="friends-image" alt="Image" src=<%= friend.picture %>>
                                    <% } %>
                                </div>
                                <div class="friends-body">
                                    <h1 class="friends-name"><%= friend.name %></h1>
                                </div>
                            </a>
                        <% }); %>
                    </div>
                </div>
            <% } %>
            <% if ((locals.requestedFriends && requestedFriends.length) || (locals.availableFriends && availableFriends.length)) { %>
                <div class="friends-divs">
                    <h1 class="title-heading">People you may know</h1>
                    <div class="friends-row">
                        <% if (locals.requestedFriends && requestedFriends.length) { %>
                                <% requestedFriends.forEach(friend => { %>
                                    <section class="friends-section">
                                        <div class="friends-header">
                                        <% if (friend.picture) { %>
                                            <img class="friends-image" alt="Image" src=<%= friend.picture %>>
                                        <% } %>
                                        </div>
                                        <div class="friends-body">
                                            <h1 class="friends-name"><%= friend.name %></h1>
                                            <button class="add-friend-button changed-friend-request" name="<%= friend.name %>" disabled>Requested</button>
                                        </div>
                                    </section>
                                <% }); %>
                        <% } %>
                        <% if (locals.availableFriends && availableFriends.length) { %>
                            <% availableFriends.forEach(friend => { %>
                                <section class="friends-section">
                                    <div class="friends-header">
                                    <% if (friend.picture) { %>
                                        <img class="friends-image" alt="Image" src=<%= friend.picture %>>
                                    <% } %>
                                    </div>
                                    <div class="friends-body">
                                        <h1 class="friends-name"><%= friend.name %></h1>
                                        <button class="add-friend-button" name="<%= friend.name %>">Add Friend</button>
                                    </div>
                                </section>
                            <% }); %>
                        <% } %>
                    </div>
                </div>
            <% } %>
        </main>
    </body>
    <script src="/js/friends.js"></script>
</html>